# MViz - 简化的3D可视化工具

MViz是一个基于C++和OpenGL的3D可视化工具，设计用来展示不同数据源的结构化数据流，类似于ROS2中的RViz但功能更为简化。

## 开发阶段

当前项目处于第五阶段：数据类型可视化实现。

### 已完成功能

1. **基础窗口和OpenGL上下文** - 能够创建窗口并设置OpenGL渲染环境
2. **相机控制** - 实现了轨道相机(Orbit Camera)和第一人称(FPS)两种模式的相机控制
3. **基础场景元素** - 实现了简单着色器系统、渲染器类和基础场景元素(世界坐标轴和地面网格)
4. **坐标系管理** - 实现了坐标系(TF)管理系统，可以显示和控制多个坐标系的层次结构
   - 坐标系可视化设置：控制坐标系标签显示、标签大小和坐标轴粗细
   - 使用FreeType库实现了3D空间中的文本渲染功能，可以显示坐标系名称
   - 支持面向相机的billboarding技术，确保文本始终朝向用户
5. **点云数据可视化** - 实现了点云数据的渲染和显示
   - 点云专用着色器：支持调整点大小、颜色等属性
   - 实现了着色器管理系统，可根据数据类型自动切换着色器
   - 高效的点云渲染：使用顶点缓冲对象(VBO)优化大量点的渲染性能
   - 支持点云数据与坐标系(TF)的集成，可以在不同坐标系下正确显示点云

### 操作说明

- **ESC键**: 关闭应用程序
- **F键**: 切换相机模式(Orbit/FPS)
- **R键**: 重置相机到默认位置
- **鼠标操作**:
  - **左键拖拽**: 在轨道模式下旋转视角
  - **右键拖拽**: 在轨道模式下平移视图
  - **滚轮**: 在轨道模式下缩放视图；在FPS模式下调整FOV
  - **FPS模式**:
    - **W/A/S/D**: 前后左右移动
    - **鼠标移动**: 调整视角
- **UI控制面板**:
  - **参考坐标系选择器**: 切换不同的参考坐标系
  - **坐标系设置**: 控制坐标系标签显示、调整标签大小和坐标轴粗细
  - **可视化对象列表**: 控制各类可视化对象的可见性，包括坐标系和点云数据

## 编译和运行

1. 确保已安装以下依赖:
   - C++17兼容的编译器
   - CMake 3.14+
   - OpenGL 3.3+兼容的显卡驱动

2. 编译步骤:
   ```bash
   mkdir -p build
   cd build
   cmake ..
   cmake --build .
   ```

3. 运行:
   ```bash
   ./mviz
   ```

## 项目结构

```
mviz/
├── include/             # 头文件
│   ├── core/            # 核心组件(Application, Camera等)
│   ├── rendering/       # 渲染相关(Shader, Renderer等)
│   ├── data/            # 数据类型定义(PointCloud等)
│   ├── ui/              # 界面相关组件
│   └── visualization/   # 可视化对象(PointCloudVisual等)
├── src/                 # 源文件
│   ├── core/            # 核心组件实现
│   ├── rendering/       # 渲染相关实现
│   ├── ui/              # 界面相关实现
│   └── visualization/   # 可视化对象实现
├── shaders/             # GLSL着色器文件
│   ├── basic.vert       # 基本顶点着色器
│   ├── basic.frag       # 基本片段着色器
│   ├── point_cloud.vert # 点云顶点着色器
│   └── point_cloud.frag # 点云片段着色器
├── assets/              # 资源文件(未来需要)
├── CMakeLists.txt       # CMake构建配置
└── README.md            # 项目说明
```

## 下一步计划

- 实现更多数据类型的可视化(几何图元等)
- 添加网络接口，支持从外部数据源接收数据
- 完善UI界面功能，支持点云属性调整
- 添加点云处理功能，如降采样等 